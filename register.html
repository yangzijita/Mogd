<!DOCTYPE html>
<html lang="zh">

<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>登录/注册</title>
    <link rel="stylesheet" type="text/css" href="css/normalize.css" />
    <link rel="stylesheet" type="text/css" href="css/htmleaf-demo.css" />
    <script src="js/jquery-2.1.1.min.js"></script>
    <link rel="stylesheet" href="css/register.css">
</head>

<body>
    <div class="htmleaf-container">
        <!-- 头部固定样式 -->
        <header class="htmleaf-header">
            <h1>Mogd</h1>
            <div class="htmleaf-links">
                <a class="htmleaf-icon icon-htmleaf-home-outline" href="#" title="主页" target="_blank"><span>主页
                    </span></a>
                <a class="htmleaf-icon icon-htmleaf-arrow-forward-outline" href="#" title="" target="_blank"><span>
                        返回上页</span></a>
            </div>
        </header>
        <!-- 表单开始 -->
        <div id="wrapper" class="login-page">
            <div id="login_form" class="form">
                <form class="register-form">
                    <!-- 
                  数据
                用户名： r_user_name
                   密码：    r_pwd
                    重复密码：    re_pwd
                       qq：     r_qq
                        手机：  r_phone
                        验证码   r_verification
                       手机验证码         r_phoneyzm
               -->
                    <input type="text" placeholder="用户名" id="r_user_name" />
                    <input type="password" placeholder="密码" id="r_pwd" />
                    <input type="repassword" placeholder="重复密码" id="re_pwd" />
                    <input type="text" placeholder="QQ" id="r_qq" />
                    <input type="text" id="r_phone" placeholder="请输入手机号" />
                    <div class="yzm-div">
                        <input type="text" id="r_verification" placeholder="请输入验证码" />
                        <img type="image" id="yzmimg" src="http://localhost:8081/1x/no1-5/captcha.php" />
                    </div>
                    <div class="phoneyz">
                        <input type="text" id="r_phoneyzm" placeholder="手机短信验证码" />
                        <input id="phonebtn" type="button" value="获取验证码"></input>
                    </div>
                    <input id="create" type="button" value="注册"></input>
                    <p class="message">
                        已经有了一个账户? <a href="login.html">立刻登录</a>
                    </p>
                </form>
            </div>
        </div>
    </div>

    <!-- 验证码随机 -->
    <script>
        var verifyImage = document.getElementById('yzmimg');
        verifyImage.onclick = function () {
            // 在（2）处使用Math对象随机生成一个0-1小数，实现点击刷新
            this.src = 'http://localhost:8081/1x/no1-5/captcha.php?r=' + Math.random();
        }
    </script>
    <script>
        $("#create").click(function () {
            var dic = {
                r_user_name: $("#r_user_name").val(),
                r_pwd: $("#r_pwd").val(),
                re_pwd: $("#re_pwd").val(),
                r_qq: $("#r_qq").val(),
                r_phone: $("#r_phone").val(),
                r_verification: $("#r_verification").val(),
                r_phoneyzm: $("#r_phoneyzm").val()
            };
            if (dic.r_user_name == null || dic.r_user_name == "") {
                alert("账号null");
            } else if (dic.r_pwd == null || dic.r_pwd == "") {
                alert("mima1 null");
            } else if (dic.re_pwd == null || dic.re_pwd == "") {
                alert("mima1 null");
            } else if (dic.r_qq == null || dic.r_qq == "") {
                alert("mima1 null");
            } else if (dic.r_phone == null || dic.r_phone == "") {
                alert("mima1 null");
            } else if (dic.r_verification == null || dic.r_verification == "") {
                alert("mima1 null");
            }
            else if (dic.r_phoneyzm == null || dic.r_phoneyzm == "") {
                alert("mima1 null");
            } else {
                console.log(dic);
                // 将获取的字符串转换为 json数据
                var msg = JSON.stringify(dic);
                // var $test = $(".test");
                // ajax发送
                $.ajax({
                    // 发送到的地址
                    url: "/chaee.php",
                    //请求方式
                    type: "post",
                    //指定请求的数据格式为json
                    contentType: "application/json",
                    // 数据
                    data: msg,
                    //指定响应的格式为json,注意如果后台没有放回json类型的数据格式下方的success不会执行
                    dataType: "json",
                    success: function (res) {
                        data = JSON.parse(res);
                        if (data == "2") {
                            $test.text("登录失败!");
                        } else if (data == "1") {
                            location.href = "https://www.baidu.com/";
                        }
                    },
                    error: function () {
                        console.log("请求出错！");
                    }
                });

            }



        });
    </script>
</body>

</html>