<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>蘑菇丁打卡</title>
    <meta name="description" content="蘑菇丁打卡">
    <meta name="keywords" content="index">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="renderer" content="webkit">
    <meta http-equiv="Cache-Control" content="no-siteapp" />
    <link rel="icon" type="image/png" href="assets/i/favicon.png">
    <link rel="apple-touch-icon-precomposed" href="assets/i/app-icon72x72@2x.png">
    <meta name="apple-mobile-web-app-title" content="蘑菇丁打卡" />
    <script src="assets/js/echarts.min.js"></script>
    <link rel="stylesheet" href="assets/css/amazeui.min.css" />
    <link rel="stylesheet" href="assets/css/amazeui.datatables.min.css" />
    <link rel="stylesheet" href="assets/css/app.css">
    <script src="assets/js/jquery.min.js"></script>
    <link rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="https://cdn.staticfile.org/jquery/2.1.1/jquery.min.js"></script>
    <script src="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script>

        $(function () {
            $.ajax({
                url: "/../IndexViews/User/",//ajax请求要发送的地址
                dataType: "json",//响应数据的类型
                type: "POST",//发送请求的方式
                success: function (data) {
                    //data为服务器端响应的数据
                    rs = data;
                    if (rs.status == "400") {
                        window.location.href = "../login.html";
                    }
                }
            });
        })
        $(function () {
            $.ajax({
                url: "/../IndexViews/UserInfo/",//ajax请求要发送的地址
                dataType: "json",//响应数据的类型
                type: "POST",//发送请求的方式
                success: function (data) {
                    //data为服务器端响应的数据
                    rs = data;
                    if (rs.status == "400") {
                        // window.location.href = "../login.html";
                        // console.log('当前未登录');
                    } else if (rs.status == "200") {
                        // alert('ok');
                        // console.log(rs);
                        // console.log(rs.data.QQimg);
                        $("#imgqq").attr('src', rs.data.QQimg);
                        $("#idname").text(rs.data.phone);
                        $("#idname1").text(rs.data.phone);

                    }
                }
            });
        })
        // $(function () {
        //     $('#myModalLabel').on('hide.bs.modal', function () {
        //         // 关闭时清空edit状态为add
        //         $("#act").val("add");
        //         location.reload();
        //     })
        // });
        // $('#myModalLabel').modal(options)

    </script>
    <style>
        .delclass {
            /* position: absolute;
            top: 30%;
            left: 50%;
            transform: translateX(-50%) translateY(-50%); */
            margin-top: 1%;
        }
    </style>
</head>

<body data-type="widgets">
    <script src="assets/js/theme.js"></script>
    <div class="am-g tpl-g">
        <!-- 头部 -->
        <header>
            <!-- logo -->
            <div class="am-fl tpl-header-logo">
                <a href="javascript:;"><img src="../images/log.png" alt=""></a>
            </div>
            <!-- 右侧内容 -->
            <div class="tpl-header-fluid">
                <!-- 侧边切换 -->
                <div class="am-fl tpl-header-switch-button am-icon-list">
                    <span>

                    </span>
                </div>
                <!-- 搜索 -->
                <div class="am-fl tpl-header-search">
                    <form class="tpl-header-search-form" action="javascript:;">
                        <button class="tpl-header-search-btn am-icon-search"></button>
                        <input class="tpl-header-search-box" type="text" placeholder="搜索内容...">
                    </form>
                </div>
                <!-- 其它功能-->
                <div class="am-fr tpl-header-navbar">
                    <ul>
                        <!-- 欢迎语 -->
                        <li class="am-text-sm tpl-header-navbar-welcome">
                            <a href="javascript:;">欢迎你, <span id="idname">admin</span> </a>
                        </li>
                        <!-- 新邮件 -->
                        <!-- <li class="am-dropdown tpl-dropdown" data-am-dropdown>
                            <a href="javascript:;" class="am-dropdown-toggle tpl-dropdown-toggle" data-am-dropdown-toggle>
                                <i class="am-icon-envelope"></i>
                                <span class="am-badge am-badge-success am-round item-feed-badge">4</span>
                            </a> -->
                        <!-- 弹出列表 -->
                        <!-- <ul class="am-dropdown-content tpl-dropdown-content">
                                <li class="tpl-dropdown-menu-messages">
                                    <a href="javascript:;" class="tpl-dropdown-menu-messages-item am-cf">
                                        <div class="menu-messages-ico">
                                            <img src="assets/img/user04.png" alt="">
                                        </div>
                                        <div class="menu-messages-time">
                                            3小时前
                                        </div>
                                        <div class="menu-messages-content">
                                            <div class="menu-messages-content-title">
                                                <i class="am-icon-circle-o am-text-success"></i>
                                                <span>夕风色</span>
                                            </div>
                                            <div class="am-text-truncate"> Amaze UI 的诞生，依托于 GitHub 及其他技术社区上一些优秀的资源；Amaze UI 的成长，则离不开用户的支持。 </div>
                                            <div class="menu-messages-content-time">2016-09-21 下午 16:40</div>
                                        </div>
                                    </a>
                                </li>

                                <li class="tpl-dropdown-menu-messages">
                                    <a href="javascript:;" class="tpl-dropdown-menu-messages-item am-cf">
                                        <div class="menu-messages-ico">
                                            <img src="assets/img/user02.png" alt="">
                                        </div>
                                        <div class="menu-messages-time">
                                            5天前
                                        </div>
                                        <div class="menu-messages-content">
                                            <div class="menu-messages-content-title">
                                                <i class="am-icon-circle-o am-text-warning"></i>
                                                <span>禁言小张</span>
                                            </div>
                                            <div class="am-text-truncate"> 为了能最准确的传达所描述的问题， 建议你在反馈时附上演示，方便我们理解。 </div>
                                            <div class="menu-messages-content-time">2016-09-16 上午 09:23</div>
                                        </div>
                                    </a>
                                </li>
                                <li class="tpl-dropdown-menu-messages">
                                    <a href="javascript:;" class="tpl-dropdown-menu-messages-item am-cf">
                                        <i class="am-icon-circle-o"></i> 进入列表…
                                    </a>
                                </li>
                            </ul>
                        </li> -->

                        <!-- 新提示 -->
                        <!-- <li class="am-dropdown" data-am-dropdown>
                            <a href="javascript:;" class="am-dropdown-toggle" data-am-dropdown-toggle>
                                <i class="am-icon-bell"></i>
                                <span class="am-badge am-badge-warning am-round item-feed-badge">5</span>
                            </a> -->

                        <!-- 弹出列表 -->
                        <!-- <ul class="am-dropdown-content tpl-dropdown-content">
                                <li class="tpl-dropdown-menu-notifications">
                                    <a href="javascript:;" class="tpl-dropdown-menu-notifications-item am-cf">
                                        <div class="tpl-dropdown-menu-notifications-title">
                                            <i class="am-icon-line-chart"></i>
                                            <span> 有6笔新的销售订单</span>
                                        </div>
                                        <div class="tpl-dropdown-menu-notifications-time">
                                            12分钟前
                                        </div>
                                    </a>
                                </li>
                                <li class="tpl-dropdown-menu-notifications">
                                    <a href="javascript:;" class="tpl-dropdown-menu-notifications-item am-cf">
                                        <div class="tpl-dropdown-menu-notifications-title">
                                            <i class="am-icon-star"></i>
                                            <span> 有3个来自人事部的消息</span>
                                        </div>
                                        <div class="tpl-dropdown-menu-notifications-time">
                                            30分钟前
                                        </div>
                                    </a>
                                </li>
                                <li class="tpl-dropdown-menu-notifications">
                                    <a href="javascript:;" class="tpl-dropdown-menu-notifications-item am-cf">
                                        <div class="tpl-dropdown-menu-notifications-title">
                                            <i class="am-icon-folder-o"></i>
                                            <span> 上午开会记录存档</span>
                                        </div>
                                        <div class="tpl-dropdown-menu-notifications-time">
                                            1天前
                                        </div>
                                    </a>
                                </li>


                                <li class="tpl-dropdown-menu-notifications">
                                    <a href="javascript:;" class="tpl-dropdown-menu-notifications-item am-cf">
                                        <i class="am-icon-bell"></i> 进入列表…
                                    </a>
                                </li>
                            </ul>
                        </li> -->

                        <!-- 退出 -->
                        <li class="am-text-sm">
                            <a href="/../IndexViews/LoginOut/">
                                <span class="am-icon-sign-out"></span> 退出
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </header>
        <!-- 风格切换 -->
        <div class="tpl-skiner">
            <div class="tpl-skiner-toggle am-icon-cog">
            </div>
            <div class="tpl-skiner-content">
                <div class="tpl-skiner-content-title">
                    选择主题
                </div>
                <div class="tpl-skiner-content-bar">
                    <span class="skiner-color skiner-white" data-color="theme-white"></span>
                    <span class="skiner-color skiner-black" data-color="theme-black"></span>
                </div>
            </div>
        </div>
        <!-- 侧边导航栏 -->
        <div class="left-sidebar">
            <!-- 用户信息 -->
            <div class="tpl-sidebar-user-panel">
                <div class="tpl-user-panel-slide-toggleable">
                    <div class="tpl-user-panel-profile-picture">
                        <img id="imgqq" src="assets/img/user04.png" alt="">
                    </div>
                    <span class="user-panel-logged-in-text">
                        <i class="am-icon-circle-o am-text-success tpl-user-panel-status-icon"></i>
                        <span id="idname1">禁言小张</span>
                    </span>
                    <a href="javascript:;" class="tpl-user-panel-action-link"> <span class="am-icon-pencil"></span>
                        账号设置</a>
                </div>
            </div>
            <!-- 菜单 -->
            <ul class="sidebar-nav">
                <!-- <li class="sidebar-nav-heading">Components <span class="sidebar-nav-heading-info"> 附加组件</span></li> -->
                <li class="sidebar-nav-link">
                    <a href="index.html">
                        <i class="am-icon-home sidebar-nav-link-logo"></i> 首页
                    </a>
                </li>
                <li class="sidebar-nav-link">
                    <a href="table-list.html">
                        <i class="am-icon-table sidebar-nav-link-logo"></i> 任务
                    </a>
                </li>
            </ul>
        </div>
        <!-- 内容区域 -->
        <div class="tpl-content-wrapper">
            <div class="row-content am-cf">
                <div class="row">
                    <div class="am-u-sm-12 am-u-md-12 am-u-lg-12">
                        <div class="widget am-cf">
                            <div class="widget-head am-cf">
                                <div class="widget-title  am-cf">任务列表</div>


                            </div>
                            <div class="widget-body  am-fr">

                                <div class="am-u-sm-12 am-u-md-6 am-u-lg-6">
                                    <div class="am-form-group">
                                        <div class="am-btn-toolbar">-
                                            <div class="am-btn-group am-btn-group-xs">
                                                <button type="button"
                                                    class="btn btn-primary btn-sm am-btn am-btn-default am-btn-success"
                                                    data-toggle="modal" data-target="#myModal"><span
                                                        class="am-icon-plus"></span> 新增</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="modal fade" id="myModal" tabindex="-1" role="dialog"
                                    aria-labelledby="myModalLabel" aria-hidden="true">
                                    <div class="modal-dialog">
                                        <div class="modal-content">
                                            <div class="modal-header">
                                                <button type="button" class="close" data-dismiss="modal"
                                                    aria-hidden="true">
                                                    &times;
                                                </button>
                                                <h4 class="modal-title" id="myModalLabel">
                                                    用户信息
                                                </h4>
                                            </div>
                                            <div class="modal-body">
                                                <form class="form-horizontal" role="form">
                                                    <div class="form-group">
                                                        <!-- <label for="user_id" class="col-sm-3 control-label">
                                                            <p>用户ID</p>
                                                        </label> -->
                                                        <div class="col-sm-12">
                                                            <input type="text" class="form-control" id="mgdphone"
                                                                name="mgdphone" value="" placeholder="mobile">
                                                        </div>
                                                    </div>

                                                    <div class="form-group">
                                                        <!-- <label for="lastname" class="col-sm-3 control-label">用户名</label> -->
                                                        <div class="col-sm-12">
                                                            <input type="text" class="form-control" name="user_name"
                                                                value="" id="passwd" placeholder="蘑菇钉密码">
                                                        </div>
                                                    </div>
                                                    <div class="form-group">
                                                        <!-- <label for="lastname" class="col-sm-3 control-label">地址</label> -->
                                                        <div class="col-sm-12">
                                                            <input type="text" class="form-control" name="address"
                                                                value="" id="uinfo" placeholder="打卡发布的信息">
                                                        </div>
                                                    </div>

                                                    <div class="form-group">
                                                        <!-- <label for="remark" class="col-sm-3 control-label">备注</label> -->
                                                        <div class="col-sm-12">
                                                            <input type="text" class="form-control" name="address"
                                                                value="" id="address" placeholder="打卡地点">
                                                        </div>
                                                    </div>
                                                    <div class="form-group">
                                                        <!-- <label for="remark" class="col-sm-3 control-label">备注</label> -->
                                                        <label for=""
                                                            class="col-sm-3 control-label text-info">打卡类型</label>
                                                        <div class="col-sm-9">
                                                            <!-- <input type="text" class="form-control" name="address"
                                                                value="" id="type" placeholder="打卡类型（START，END）"> -->
                                                            <select id="you_type" class="form-control">
                                                                <option value="START">START</option>
                                                                <option value="END">END</option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                    <div class="form-group">
                                                        <!-- <label for="remark" class="col-sm-3 control-label">备注</label> -->
                                                        <div class="col-sm-12">
                                                            <input type="text" class="form-control" name="address"
                                                                value="" id="hour" maxlength="2"
                                                                placeholder="设置打卡时间（单位：整点；如8点）">

                                                        </div>
                                                    </div>
                                                    <div class="form-group">
                                                        <!-- <label for="remark" class="col-sm-3 control-label">备注</label> -->
                                                        <div class="col-sm-12">
                                                            <input type="text" class="form-control" name="address"
                                                                value="" id="minute" maxlength="2"
                                                                placeholder="设置打卡时间（单位：分；如 30分）">

                                                        </div>
                                                    </div>
                                                    <div class="form-group">
                                                        <!-- <label for="remark" class="col-sm-3 control-label">备注</label> -->
                                                        <div class="col-sm-12">
                                                            <input type="text" class="form-control" name="address"
                                                                value="" id="week_start" maxlength="2"
                                                                placeholder="打卡的开始时间">
                                                        </div>
                                                    </div>
                                                    <div class="form-group">
                                                        <!-- <label for="remark" class="col-sm-3 control-label">备注</label> -->
                                                        <div class="col-sm-12">
                                                            <input type="text" class="form-control" name="address"
                                                                value="" id="week_end" maxlength="2"
                                                                placeholder="设置打卡的结束时间">
                                                        </div>
                                                    </div>

                                                </form>
                                            </div>
                                            <div class="modal-footer">
                                                <button type="button" class="btn btn-default" data-dismiss="modal">关闭
                                                </button>
                                                <button type="submit" id="adduced" class="btn btn-primary">
                                                    提交
                                                </button><span id="tip"> </span>
                                            </div>
                                        </div>
                                    </div><!-- /.modal -->
                                </div>
                                <!-- 新增 -->
                                <script>
                                    $("#adduced").click(function () {
                                        var dic = {
                                            mgdphone: $("#mgdphone").val(),
                                            passwd: $("#passwd").val(),
                                            address: $("#address").val(),
                                            type: $("#you_type option:selected").val(),
                                            uinfo: $("#uinfo").val(),
                                            hour: $("#hour").val(),
                                            minute: $("#minute").val(),
                                            week_start: $("#week_start").val(),
                                            week_end: $("#week_end").val(),
                                        };
                                        // console.log(dic);
                                        if (dic.mgdphone == null || dic.mgdphone == "") {
                                            alert("mobile 不能为空");
                                        } else if (dic.passwd == null || dic.passwd == "") {
                                            alert("密码不能为空");
                                        } else if (dic.address == null || dic.address == "") {
                                            alert("mima1 null");
                                        } else {
                                            // console.log(dic);
                                            // 将获取的字符串转换为 json数据
                                            var msg = JSON.stringify(dic);
                                            // var $test = $(".test");
                                            // ajax发送

                                            $.ajax({
                                                // 发送到的地址
                                                url: "/../IndexViews/NewCrontab/",
                                                //请求方式
                                                type: "post",
                                                //指定请求的数据格式为json
                                                contentType: "application/json",
                                                // 数据
                                                data: msg,
                                                //指定响应的格式为json,注意如果后台没有放回json类型的数据格式下方的success不会执行
                                                dataType: "json",
                                                success: function (res) {
                                                    console.log(res);
                                                    var data = res;
                                                    if (data.status == 200) {
                                                        console.log(res);
                                                        alert(data.data[0].info);
                                                        // location.href = "./admin/index.html";
                                                        location.href = "./table-list.html";
                                                    } else if (data.status == 400) {
                                                        // console.log(res);
                                                        alert(data.data[0].info);
                                                        location.href = "./table-list.html";
                                                    } else {
                                                        // alert("111");
                                                    }
                                                },
                                                error: function () {
                                                    console.log("请求出错！");
                                                }
                                            });
                                        }
                                    });


                                </script>


                                <div class="am-u-sm-12">
                                    <table width="100%"
                                        class="am-table am-table-compact am-table-striped tpl-table-black "
                                        id="example-r">
                                        <thead>
                                            <tr>
                                                <th>mobile</th>
                                                <th>蘑菇钉密码</th>
                                                <th>打卡发布的信息</th>
                                                <th>打卡地点</th>
                                                <th>打卡类型</th>
                                                <th>添加时间</th>
                                                <th>打卡时间</th>
                                                <th>操作</th>
                                            </tr>
                                        </thead>
                                        <tbody id="tab">
                                            <script>
                                                $(function () {
                                                    $.ajax({
                                                        url: "/../IndexViews/GetCrontab/",//ajax请求要发送的地址
                                                        dataType: "json",//响应数据的类型
                                                        type: "POST",//发送请求的方式
                                                        success: function (data) {
                                                            //data为服务器端响应的数据
                                                            var rs = data;
                                                            if (rs.status == 400) {
                                                                // window.location.href = "../login.html";
                                                                alert(rs.data['info']);
                                                            } else if (rs.status == 200) {
                                                                var msg = "";
                                                                var res = rs.data;
                                                                for (var i = 1; i <= res.length; i++) {
                                                                    msg += "<tr class=\"gradeX\">";
                                                                    msg += "<td id=\"uphne_msg" + i + "\">" + res[i - 1].mobile + "</td>";
                                                                    msg += "<td id=\"upass_msg" + i + "\">" + res[i - 1].蘑菇钉密码 + "</td>";
                                                                    msg += "<td id=\"rmsg_msg" + i + "\">" + res[i - 1].打卡发布的信息 + "</td>";
                                                                    msg += "<td id=\"radd_msg" + i + "\">" + res[i - 1].打卡地点 + "</td>";
                                                                    msg += "<td id=\"type_msg" + i + "\">" + res[i - 1].打卡类型 + "</td>";
                                                                    msg += "<td id=\"rtime_msg" + i + "\">" + res[i - 1].添加时间 + "</td>";
                                                                    msg += "<td id=\"rdtime_msg" + i + "\">" + res[i - 1].打卡时间 + "</td>";
                                                                    msg += "<td>"
                                                                        + "<div class=\"tpl-table-black-operation\">"
                                                                        + "<a id=\"edit\" data-toggle=\"modal\" rel=\"external nofollow\" onclick=\"xgfz" + i + "()\" data-target=\"#myedit\" href=\"javascript:;\">"
                                                                        + " <i class=\"am-icon-pencil\"></i> 编辑"
                                                                        + "</a>"
                                                                        + "<a id=\"del\" href=\"javascript:;\" data-toggle=\"modal\" data-target=\"#delcz\" class=\"tpl-table-black-operation-del\">"
                                                                        + "<i class=\"am-icon-trash\"></i> 删除"
                                                                        + "</a>" +
                                                                        "</div>";
                                                                    msg += "</tr>";
                                                                }
                                                                $("#tab").html(msg);


                                                                // console.log(l1);
                                                                // mgdphone
                                                                // 给修改 赋值

                                                            }
                                                        }
                                                    });
                                                })
                                            </script>
                                        </tbody>
                                    </table>
                                    <!-- 修改任务 -->
                                    <div class="modal fade" id="myedit" tabindex="-1" role="dialog"
                                        aria-labelledby="myModalLabel" aria-hidden="true">
                                        <div class="modal-dialog">
                                            <div class="modal-content">
                                                <div class="modal-header">
                                                    <button type="button" class="close" data-dismiss="modal"
                                                        aria-hidden="true">
                                                        &times;
                                                    </button>
                                                    <h4 class="modal-title" id="myModalLabel">
                                                        用户信息
                                                    </h4>
                                                </div>
                                                <div class="modal-body">
                                                    <form class="form-horizontal" role="form">
                                                        <div class="form-group">
                                                            <label for="remark"
                                                                class="col-sm-3 control-label text-info">修改蘑菇钉账号</label>
                                                            <div class="col-sm-6">
                                                                <input type="text" class="form-control" id="xgmgdphone"
                                                                    name="mgdphone" value="" placeholder="">
                                                            </div>
                                                        </div>

                                                        <div class="form-group">
                                                            <label for="remark"
                                                                class="col-sm-3 control-label text-info">修改蘑菇钉密码</label>
                                                            <div class="col-sm-6">
                                                                <input type="text" class="form-control" name="user_name"
                                                                    value="" id="xgpasswd" placeholder="修改蘑菇钉密码">
                                                            </div>
                                                        </div>
                                                        <div class="form-group">
                                                            <label for="remark"
                                                                class="col-sm-3 control-label text-info">打卡发布的信息</label>
                                                            <div class="col-sm-6">
                                                                <input type="text" class="form-control" name="address"
                                                                    value="" id="xguinfo" placeholder="打卡发布的信息">
                                                            </div>
                                                        </div>

                                                        <div class="form-group">
                                                            <label for="remark"
                                                                class="col-sm-3 control-label text-info">
                                                                修改打卡地点
                                                            </label>
                                                            <!-- <label for="remark" class="col-sm-3 control-label">备注</label> -->
                                                            <div class="col-sm-6">
                                                                <input type="text" class="form-control" name="address"
                                                                    value="" id="xgaddress" placeholder="修改打卡地点">
                                                            </div>
                                                        </div>
                                                        <div class="form-group" style="display: none;">
                                                            <!-- <label for="remark" class="col-sm-3 control-label">备注</label> 
                                                            <label for=""
                                                                class="col-sm-3 control-label text-info">修改打卡类型</label> -->
                                                            <div class="col-sm-9">
                                                                <input type="text" class="form-control" name="address"
                                                                    value="" id="xgyou_type" maxlength="10"
                                                                    placeholder="type">
                                                            </div>
                                                        </div>
                                                        <div class="form-group">
                                                            <label for="remark"
                                                                class="col-sm-6 control-label text-info">设置打卡时间（单位：整点；如8点）</label>
                                                            <div class="col-sm-6">
                                                                <input type="text" class="form-control" name="address"
                                                                    value="" id="xghour" maxlength="2"
                                                                    placeholder="设置打卡时间（单位：整点；如8点）">
                                                            </div>
                                                        </div>
                                                        <div class="form-group">
                                                            <!-- <label for="remark" class="col-sm-3 control-label">备注</label> -->
                                                            <label for="remark"
                                                                class="col-sm-6 control-label text-info">设置打卡时间（单位：分；如
                                                                30分）</label>
                                                            <div class="col-sm-6">
                                                                <input type="text" class="form-control" name="address"
                                                                    value="" id="xgminute" maxlength="2"
                                                                    placeholder="设置打卡时间（单位：分；如 30分）">
                                                            </div>
                                                        </div>
                                                        <div class="form-group">
                                                            <label for="remark"
                                                                class="col-sm-3 control-label text-info">打卡的开始时间</label>
                                                            <!-- <label for="remark" class="col-sm-3 control-label">备注</label> -->
                                                            <div class="col-sm-7">
                                                                <input type="text" class="form-control" name="address"
                                                                    value="" id="xgweek_start" maxlength="2"
                                                                    placeholder="打卡的开始时间">
                                                            </div>
                                                        </div>
                                                        <div class="form-group">
                                                            <label for="remark"
                                                                class="col-sm-3 control-label text-info">设置打卡的结束时间</label>
                                                            <!-- <label for="remark" class="col-sm-3 control-label">备注</label> -->
                                                            <div class="col-sm-7">
                                                                <input type="text" class="form-control" name="address"
                                                                    value="" id="xgweek_end" maxlength="2"
                                                                    placeholder="设置打卡的结束时间">
                                                            </div>
                                                        </div>

                                                    </form>
                                                </div>
                                                <div class="modal-footer">
                                                    <button type="button" class="btn btn-default"
                                                        data-dismiss="modal">关闭
                                                    </button>
                                                    <button type="submit" id="upadduced" class="btn btn-primary">
                                                        提交
                                                    </button><span id="tip"> </span>
                                                </div>
                                            </div>
                                        </div><!-- /.modal -->
                                    </div>





                                    <!-- 修改 任务-->

                                    <script>
                                        $("#upadduced").click(function () {

                                            var dic = {
                                                mgdphone: $("#xgmgdphone").val(),
                                                passwd: $("#xgpasswd").val(),
                                                address: $("#xgaddress").val(),
                                                uinfo: $("#xguinfo").val(),
                                                xgtype: $("#xgyou_type").val(),
                                                hour: $("#xghour").val(),
                                                minute: $("#xgminute").val(),
                                                week_start: $("#xgweek_start").val(),
                                                week_end: $("#xgweek_end").val(),
                                            };
                                            // console.log(dic);

                                            // console.log(dic);
                                            // 将获取的字符串转换为 json数据
                                            var msg = JSON.stringify(dic);
                                            // var $test = $(".test");
                                            // ajax发送

                                            $.ajax({
                                                // 发送到的地址
                                                url: "/../IndexViews/UpdateCrontab/",
                                                //请求方式
                                                type: "post",
                                                //指定请求的数据格式为json
                                                contentType: "application/json",
                                                // 数据
                                                data: msg,
                                                //指定响应的格式为json,注意如果后台没有放回json类型的数据格式下方的success不会执行
                                                dataType: "json",
                                                success: function (res) {
                                                    console.log(res);
                                                    var data = res;
                                                    if (data.status == 200) {
                                                        console.log(res);
                                                        alert(data.data[0].info);
                                                        // location.href = "./admin/index.html";
                                                        location.href = "./table-list.html";
                                                    } else if (data.status == 400) {
                                                        // console.log(res);
                                                        alert(data.data[0].info);
                                                        location.href = "./table-list.html";
                                                    } else {
                                                        // alert("111");
                                                    }
                                                },
                                                error: function () {
                                                    console.log("请求出错！");
                                                }
                                            });

                                        });


                                    </script>
                                    <!-- 删除任务-->
                                    <div class="modal fade delclass" id="delcz" tabindex="-1" role="dialog"
                                        aria-labelledby="myModalLabel" aria-hidden="true">
                                        <div class="modal-dialog">
                                            <div class="modal-content">
                                                <div class="modal-header">
                                                    <button type="button" class="close text-warning"
                                                        data-dismiss="modal" aria-hidden="true">×</button>
                                                    <h4 class="modal-title text-warning" id="myModalLabel">删除任务</h4>
                                                </div>
                                                <div class="modal-body text-warning">删除任务无法恢复</div>
                                                <div class="modal-footer">
                                                    <button type="button" class="btn btn-default text-warning"
                                                        data-dismiss="modal">关闭</button>
                                                    <button type="button" id="del"
                                                        class="btn btn-primary text-warning">确定删除</button>
                                                </div>
                                                <script>
                                                    $("#del").click(function () {
                                                        var dic = {
                                                            type: $("#type_msg").text()
                                                        };
                                                        // console.log(dic);
                                                        // console.log(dic);
                                                        // 将获取的字符串转换为 json数据
                                                        var msg = JSON.stringify(dic);
                                                        // var $test = $(".test");
                                                        // ajax发送

                                                        $.ajax({
                                                            // 发送到的地址
                                                            url: "/../IndexViews/DeleteCrontab/",
                                                            //请求方式
                                                            type: "post",
                                                            //指定请求的数据格式为json
                                                            contentType: "application/json",
                                                            // 数据
                                                            data: msg,
                                                            //指定响应的格式为json,注意如果后台没有放回json类型的数据格式下方的success不会执行
                                                            dataType: "json",
                                                            success: function (res) {
                                                                console.log(res);
                                                                var data = res;
                                                                if (data.status == 200) {
                                                                    console.log(res);
                                                                    alert(data.data[0].info);
                                                                    location.href = "./table-list.html";
                                                                    // location.href = "./admin/index.html";
                                                                } else if (data.status == 400) {
                                                                    // console.log(res);
                                                                    alert(data.data[0].info);
                                                                    // location.href = "./table-list.html";
                                                                } else {
                                                                    // alert("111");
                                                                }
                                                            },
                                                            error: function () {
                                                                console.log("请求出错！");
                                                            }
                                                        });

                                                    });


                                                </script>
                                            </div><!-- /.modal-content -->
                                        </div><!-- /.modal-dialog -->
                                    </div><!-- /.modal -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    </div>
    <script src="assets/js/amazeui.min.js"></script>
    <script src="assets/js/amazeui.datatables.min.js"></script>
    <script src="assets/js/dataTables.responsive.min.js"></script>
    <script src="assets/js/app.js"></script>
</body>
<script>
    // $(function () {

    //     // console.log(mgdphone);
    // })
    // $(window).load(function () {         //等价于window.onload = function
    //     alert("加载完成");
    //     var lll = $("#uphne_msg1").text()
    //     console.log(lll);
    // });
    // window.onload = function () {

    // }
    // $(document).ready(function () {

    // });
    function xgfz1() {
        // alert("加载完成");
        var xgp = $("#uphne_msg1").text()//账号
        var xgpass = $("#upass_msg1").text()//mima
        var xgmsg = $("#rmsg_msg1").text()//msg
        var xgadd = $("#radd_msg1").text()//打卡地点
        var xgtype = $("#type_msg1").text()//类型
        var xgtime = $("#rtime_msg1").text()//添加时间
        var xgrtime = $("#rdtime_msg1").text()//打卡时间周期
        // console.log(xgrtime);
        var xgrminute = xgrtime.slice(0, 2)
        var xgrhour = xgrtime.slice(3, 4)
        var xgrweek_start = xgrtime.slice(9, 10)
        var xgrweek_end = xgrtime.slice(11, 12)
        // console.log(xgrweek_end);






        $("#xgmgdphone").val(xgp), //提交修改手机号
            $("#xgpasswd").val(xgpass),//提交修改密码
            $("#xgaddress").val(xgadd),//提交修改打卡地址
            $("#xguinfo").val(xgmsg),//提交修改打卡信息
            $("#xgyou_type").val(xgtype),//提交修改类型
            $("#xghour").val(xgrhour),     //提交修改小时
            $("#xgminute").val(xgrminute),    //提交修改分钟
            $("#xgweek_start").val(xgrweek_start),   //提交修改开始时间
            $("#xgweek_end").val(xgrweek_end)  //提交修改结束时间

    }
    function xgfz2() {
        // alert("加载完成");
        var xgp = $("#uphne_msg2").text()
        var xgpass = $("#upass_msg2").text()
        var xgmsg = $("#rmsg_msg2").text()
        var xgadd = $("#radd_msg2").text()
        var xgtype = $("#type_msg2").text()
        var xgtime = $("#rtime_msg2").text()
        var xgrtime = $("#rdtime_msg2").text()

        var xgrminute = xgrtime.slice(0, 2)
        var xgrhour = xgrtime.slice(3, 4)
        var xgrweek_start = xgrtime.slice(9, 10)
        var xgrweek_end = xgrtime.slice(11, 12)


        // console.log(lll);
        // alert(xgp);
        $("#xgmgdphone").val(xgp), //提交修改手机号
            $("#xgpasswd").val(xgpass),//提交修改密码
            $("#xgaddress").val(xgadd),//提交修改打卡地址
            $("#xguinfo").val(xgmsg),//提交修改打卡信息
            $("#xgyou_type").val(xgtype),//提交修改类型
            $("#xghour").val(xgrhour),     //提交修改小时
            $("#xgminute").val(xgrminute),    //提交修改分钟
            $("#xgweek_start").val(xgrweek_start),   //提交修改开始时间
            $("#xgweek_end").val(xgrweek_end)  //提交修改结束时间

    }



</script>

</html>